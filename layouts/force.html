<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Force Layout | D3.js Playbook</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.6">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="../assets/website.css">
    

        
    
    
    
    <link rel="prev" href="../layouts/stack.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="19.3"
        data-chapter-title="Force Layout"
        data-filepath="layouts/force.md"
        data-basepath=".."
        data-revision="Thu Jan 07 2016 22:28:47 GMT+0530 (India Standard Time)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="web.html">
            
                
                    <a href="../web.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Web Programming
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="svg.html">
            
                
                    <a href="../svg.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Scalable Vector Graphics
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="css.html">
            
                
                    <a href="../css.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Cascading Style Sheets
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="js.html">
            
                
                    <a href="../js.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        JavaScript
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="d3intro.html">
            
                
                    <a href="../d3intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        D3.js Basics
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="binding.html">
            
                
                    <a href="../binding.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Data Binding
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="createsvg.html">
            
                
                    <a href="../createsvg.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Creating SVG
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="barchart.html">
            
                
                    <a href="../barchart.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Bar Chart
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="scatter.html">
            
                
                    <a href="../scatter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Scatter Plot
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="scales.html">
            
                
                    <a href="../scales.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Scales
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="axes.html">
            
                
                    <a href="../axes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Axes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="updates.html">
            
                
                    <a href="../updates.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Updates
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="transitions.html">
            
                
                    <a href="../transitions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        Transitions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="files.html">
            
                
                    <a href="../files.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        Reading Files
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="exercises.html">
            
                
                    <a href="../exercises.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        Exercises
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16" data-path="manipulation.html">
            
                
                    <a href="../manipulation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        Data Manipulations
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="17" data-path="events.html">
            
                
                    <a href="../events.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        Event Listeners
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="tooltips.html">
            
                
                    <a href="../tooltips.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                        Tooltips
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19" data-path="layouts.html">
            
                
                    <a href="../layouts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                        D3 Layouts
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="19.1" data-path="layouts/pie.html">
            
                
                    <a href="../layouts/pie.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.1.</b>
                        
                        Pie Charts
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.2" data-path="layouts/stack.html">
            
                
                    <a href="../layouts/stack.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.2.</b>
                        
                        Stack Layout
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="19.3" data-path="layouts/force.html">
            
                
                    <a href="../layouts/force.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.3.</b>
                        
                        Force Layout
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >D3.js Playbook</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="force-layout">Force Layout</h1>
<p>Force-directed Layout assign forces among the set of edges and the set of nodes for drawing graphs in an aesthetically pleasing way. Nodes (entities) are represented as circles, and edges (connections) as lines.</p>
<p><img src="../assets/force.png" alt="force"></p>
<p>Now, consider a sample cricket data, with nodes as player names. And, edges as relationship/connection between these players.</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// data</span>
<span class="hljs-keyword">var</span> data = {
  nodes: [
    {name: <span class="hljs-string">&quot;Sachin&quot;</span>},
    {name: <span class="hljs-string">&quot;Murali&quot;</span>},
    {name: <span class="hljs-string">&quot;Glenn McGrath&quot;</span>},
    {name: <span class="hljs-string">&quot;AB de Villiers&quot;</span>},
    {name: <span class="hljs-string">&quot;Akram&quot;</span>},
    {name: <span class="hljs-string">&quot;BCCI&quot;</span>}
  ],
  edges: [
    {source: <span class="hljs-number">0</span>, target: <span class="hljs-number">1</span>},
    {source: <span class="hljs-number">0</span>, target: <span class="hljs-number">2</span>},
    {source: <span class="hljs-number">2</span>, target: <span class="hljs-number">3</span>},
    {source: <span class="hljs-number">2</span>, target: <span class="hljs-number">4</span>},
    {source: <span class="hljs-number">3</span>, target: <span class="hljs-number">4</span>}
  ]
}
</code></pre>
<p>The edges contain two values - {source, target}. These values correspond to the nodes above, so source=0 is Sachin, for example. <code>{source: 0, target: 1}</code> means Sachin is connected to Murali.</p>
<h2 id="apply-force">Apply Force</h2>
<pre><code class="lang-javascript"><span class="hljs-comment">// init a force layout, using the nodes and edges in dataset</span>
<span class="hljs-keyword">var</span> force = d3.layout.force()
           .nodes(data.nodes)
           .links(data.edges)
           .size([width, height])
           .linkDistance([<span class="hljs-number">50</span>])
           .charge([-<span class="hljs-number">100</span>])
           .start()
<span class="hljs-comment">// define 10 random colors</span>
<span class="hljs-keyword">var</span> colors = d3.scale.category10()
<span class="hljs-comment">// create SVG</span>
<span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>)
      .append(<span class="hljs-string">&quot;svg&quot;</span>)
      .attr(<span class="hljs-string">&quot;width&quot;</span>, width)
      .attr(<span class="hljs-string">&quot;height&quot;</span>, height)
<span class="hljs-comment">// create edges</span>
<span class="hljs-keyword">var</span> edges = svg.selectAll(<span class="hljs-string">&quot;line&quot;</span>)
  .data(data.edges)
  .enter()
  .append(<span class="hljs-string">&quot;line&quot;</span>)
  .style(<span class="hljs-string">&quot;stroke&quot;</span>, <span class="hljs-string">&quot;#ccc&quot;</span>)
  .style(<span class="hljs-string">&quot;stroke-width&quot;</span>, <span class="hljs-number">2</span>)
<span class="hljs-comment">// create nodes</span>
<span class="hljs-keyword">var</span> nodes = svg.selectAll(<span class="hljs-string">&quot;circle&quot;</span>)
  .data(data.nodes)
  .enter()
  .append(<span class="hljs-string">&quot;circle&quot;</span>)
  .attr(<span class="hljs-string">&quot;r&quot;</span>, <span class="hljs-number">6</span>)
  .style(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{ <span class="hljs-keyword">return</span> colors(i) })
  .call(force.drag)
<span class="hljs-comment">// On every tick&quot; event, re-render</span>
force.on(<span class="hljs-string">&quot;tick&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  edges.attr(<span class="hljs-string">&quot;x1&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d.source.x })
       .attr(<span class="hljs-string">&quot;y1&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d.source.y })
       .attr(<span class="hljs-string">&quot;x2&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d.target.x })
       .attr(<span class="hljs-string">&quot;y2&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d.target.y })

  nodes.attr(<span class="hljs-string">&quot;cx&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d.x })
       .attr(<span class="hljs-string">&quot;cy&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d.y })
})
</code></pre>
<iframe src="../recipes/layout-force.html" sandbox="allow-same-origin allow-scripts" onload="this.style.height=this.contentDocument.documentElement.scrollHeight+2+&apos;px&apos;;"></iframe>

<h2 id="data"><strong>data</strong></h2>
<p>Let&apos;s look at the console to observer changes in data</p>
<p><img src="../assets/force-data-console.png" alt="force"></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../layouts/stack.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Stack Layout"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"livereload":{}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
